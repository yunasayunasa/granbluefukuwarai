# 最終修正手順書 - シンプル版

## 問題の根本原因

1. **アセットブラウザ**: `EditorUI.js` の `populateAssetBrowser()` が `asset-type-tabs` を必須としている
2. **レイアウト崩れ**: `#inspector-panel` に高さ制限がなく、プロパティが増えると下のパネルを押し出す

## 解決策

### 1. HTMLをシンプルに戻す (index.html 136-152行目)

**現在:**
```html
<div class="panel-tools">
  <button id="add-asset-button" title="Add Asset">+</button>
</div>
</div>

<!-- Project View -->
<div id="project-view" class="tab-content" style="display: block;">
  <div id="asset-type-tabs" class="asset-tabs">
    <!-- Asset type tabs will be generated by JS -->
  </div>
  <div class="project-assets" id="asset-list">
    <!-- Asset grid -->
  </div>
  <div class="project-footer">
    <input type="range" id="icon-size-slider" min="1" max="3" value="2" />
  </div>
</div>
```

**修正後:**
```html
<div class="panel-tools">
  <button id="add-asset-button" title="Add Asset">+</button>
</div>
    </div>
    
    <!-- Project Content -->
    <div class="panel-content">
      <div class="project-assets" id="asset-list">
        <!-- Asset grid -->
      </div>
      <div class="project-footer">
        <input type="range" id="icon-size-slider" min="1" max="3" value="2" />
      </div>
    </div>
```

### 2. インスペクタパネルに高さ制限を追加 (style.css 117行目付近)

**現在:**
```css
#inspector-panel {
  width: var(--sidebar-width);
  border-left: 1px solid var(--border-color);
  flex-shrink: 0;
}
```

**修正後:**
```css
#inspector-panel {
  width: var(--sidebar-width);
  border-left: 1px solid var(--border-color);
  flex-shrink: 0;
  max-height: 100vh; /* 追加 */
  overflow: hidden;  /* 追加 */
}
```

### 3. インスペクタのコンテンツエリアにスクロールを追加

`#inspector-content` または `.panel-content` が既にスクロール可能か確認。
もし必要なら、`#inspector-panel .panel-content` に:
```css
#inspector-panel .panel-content {
  overflow-y: auto;
  max-height: calc(100vh - 100px);
}
```

### 4. EditorUI.jsの修正 (649行目)

`populateAssetBrowser()` のチェックを緩和:

**現在:**
```javascript
if (!assetList || !this.assetListContainer || !this.assetTabContainer) {
    console.warn('[EditorUI] Missing dependencies for asset browser');
    return;
}
```

**修正後:**
```javascript
if (!assetList || !this.assetListContainer) {
    console.warn('[EditorUI] Missing dependencies for asset browser');
    return;
}
```

→ `assetTabContainer` のチェックを削除

---

## 期待される結果

1. ✅ アセット一覧が表示される（タブなしのシンプル版）
2. ✅ オブジェクト選択時にインスペクタがスクロール可能
3. ✅ プロジェクトパネルが画面外に押し出されない
4. ✅ レイアウトが安定する
